<!DOCTYPE html>
<html lang="ko">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>ë¶€ì‚°ì™¸êµ­ì–´ëŒ€í•™êµ ê¸€ë¡œì»¬í¬ë¦¬ì—ì´í„° í•˜ë‹¨ | Google Search Clone</title>
    
    <script src="https://cdn.tailwindcss.com"></script>

    <link rel="stylesheet" href="https://unpkg.com/leaflet@1.9.4/dist/leaflet.css" />
    
    <style>
        /* ------------------------------------- */
        /* ğŸ¨ ê¸°ì¡´ UI ë° ê¸°ë³¸ ìŠ¤íƒ€ì¼ */
        /* ------------------------------------- */
        @import url('https://fonts.googleapis.com/css2?family=Noto+Sans+KR:wght@100..900&display=swap');
        body {
            font-family: 'Noto Sans KR', sans-serif;
            background-color: #202124;
            color: #e8eaed;
            /* ìŠ¤í¬ë¡¤ë°” ìˆ¨ê¹€ */
            -ms-overflow-style: none; /* IE and Edge */
            scrollbar-width: none; /* Firefox */
        }
        body::-webkit-scrollbar { display: none; } /* Chrome, Safari, Opera */
        
        /* ì»¤ìŠ¤í…€ ìƒ‰ìƒ */
        .text-google-blue { color: #8ab4f8; }
        .text-google-yellow { color: #fbbc04; }
        .bg-search-bar { background-color: #303134; }
        
        /* Map container */
        #mapPreview {
            width: 100%;
            height: 100%;
        }

        /* Leaflet Map ì»¨í…Œì´ë„ˆ ë°°ê²½ìƒ‰ ì„¤ì • */
        #mapPreview .leaflet-container {
            background-color: #e6e6e6; 
        }
        
        /* âš ï¸ Leaflet ì €ì‘ê¶Œ ë¬¸êµ¬ ìˆ¨ê¸°ê¸° (ê°•ì œ ì ìš©) âš ï¸ */
        .leaflet-control-attribution {
            display: none !important;
        }

        /* ------------------------------------- */
        /* ğŸ–¼ï¸ ì´ë¯¸ì§€ ê°¤ëŸ¬ë¦¬/ë·°ì–´ ì „ìš© CSS */
        /* ------------------------------------- */
        /* ê°¤ëŸ¬ë¦¬ ì¸ë„¤ì¼ ìŠ¤íƒ€ì¼ */
        .gallery-item {
            cursor: pointer;
            overflow: hidden;
            border-radius: 8px;
            box-shadow: 0 4px 8px rgba(0, 0, 0, 0.2);
            transition: transform 0.2s;
            line-height: 0; 
        }
        .gallery-item:hover {
            transform: scale(1.05);
            box-shadow: 0 6px 12px rgba(0, 0, 0, 0.4);
        }
        .gallery-item img {
            width: 100%;
            height: 120px; /* ì¸ë„¤ì¼ í¬ê¸° ê³ ì • */
            object-fit: cover;
            display: block;
        }
    </style>
</head>
<body>

<div id="app" class="min-h-screen">

    <header class="w-full border-b border-white/10 sticky top-0 z-40 bg-[#202124]/80 backdrop-blur">
        <div class="max-w-7xl mx-auto px-4 py-3 flex items-center gap-4">
            <div class="text-2xl font-bold tracking-tight">Goo<span class="text-google-blue">gle</span></div>
            
            <div class="flex-1">
                <div class="flex items-center gap-2 bg-search-bar rounded-full pl-4 pr-2 py-2 border border-transparent shadow">
                    <span class="text-[#bdc1c6] text-sm"></span>
                    <input
                        id="searchInput"
                        value="ë¶€ì‚°ì™¸êµ­ì–´ëŒ€í•™êµ ê¸€ë¡œì»¬í¬ë¦¬ì—ì´í„° í•˜ë‹¨"
                        placeholder="ê²€ìƒ‰ ë˜ëŠ” URL ì…ë ¥"
                        class="flex-1 bg-transparent outline-none placeholder:text-[#9aa0a6] text-sm text-[#e8eaed]"
                        data-testid="search-input"
                        readonly
                    />
                    <button
                        id="searchSubmit"
                        type="button"
                        class="px-4 py-1.5 bg-[#8ab4f8] text-[#202124] rounded-full text-sm font-semibold hover:brightness-95"
                        data-testid="search-submit"
                    >
                        Google ê²€ìƒ‰
                    </button>
                </div>
            </div>
            <button class="w-8 h-8 rounded-full bg-blue-500 text-white flex items-center justify-center font-medium">B</button>
        </div>
        
        <div class="max-w-7xl mx-auto px-4 flex items-center gap-8 text-sm text-[#9aa0a6]">
            <a href="#results-section" id="tab-all" onclick="changeTab('all')" class="tab-item flex items-center gap-1 py-2 border-b-2 border-google-blue text-google-blue font-semibold">
                <svg xmlns="http://www.w3.org/2000/svg" class="w-4 h-4" viewBox="0 0 24 24" fill="currentColor"><path d="M0 0h24v24H0V0z" fill="none"/><path d="M15 4V1H9v3H0v3h24V4h-9zM2 9v2h20V9H2zm0 6h20v-2H2v2zm0 4h20v-2H2v2z"/></svg>
                <span>ì „ì²´</span>
            </a>
            <a href="#results-section" id="tab-image" onclick="changeTab('image', true)" class="tab-item flex items-center gap-1 py-2 hover:text-white">
                <svg xmlns="http://www.w3.org/2000/svg" class="w-4 h-4" viewBox="0 0 24 24" fill="currentColor"><path d="M0 0h24v24H0V0z" fill="none"/><path d="M21.96 11.08l-2.09-2.09c-.19-.19-.45-.29-.71-.29-.26 0-.52.1-.71.29l-.92.92-1.42-1.42-.92-.92c-.19-.19-.45-.29-.71-.29-.26 0-.52.1-.71.29l-1.42 1.42-1.42-1.42c-.19-.19-.45-.29-.71-.29-.26 0-.52.1-.71.29l-1.42 1.42L3.13 8.99c-.19-.19-.45-.29-.71-.29-.26 0-.52.1-.71.29l-2.09 2.09c.19.19.29.45.29.71 0 .26.1.52.29.71l1.42 1.42-1.42 1.42c-.19.19-.29.45-.29.71 0 .26.1.52.29.71l2.09 2.09c.19.19.45.29.71.29.26 0 .52-.1.71-.29l1.42-1.42 1.42 1.42c-.19.19.45.29.71.29.26 0 .52-.1.71-.29l1.42-1.42 1.42 1.42c.19-.19.45.29.71.29.26 0 .52-.1.71-.29l2.09-2.09c.19-.19.29-.45.29-.71 0-.26-.1-.52-.29-.71l-1.42-1.42 1.42-1.42c.19-.19.29-.45.29-.71 0-.26-.1-.52-.29-.71z"/></svg>
                <span>ì´ë¯¸ì§€</span>
            </a>
            <a href="#" id="tab-video" onclick="changeTab('video')" class="tab-item flex items-center gap-1 py-2 hover:text-white">
                <svg xmlns="http://www.w3.org/2000/svg" class="w-4 h-4" viewBox="0 0 24 24" fill="currentColor"><path d="M0 0h24v24H0V0z" fill="none"/><path d="M10 16.5l6-4.5-6-4.5v9zM12 2C6.48 2 2 6.48 2 12s4.48 10 10 10 10-4.48 10-10S17.52 2 12 2zm0 18c-4.41 0-8-3.59-8-8s3.59-8 8-8 8 3.59 8 8-3.59 8-8 8z"/></svg>
                <span>ë™ì˜ìƒ</span>
            </a>
            <a href="#" id="tab-map" onclick="changeTab('map')" class="tab-item flex items-center gap-1 py-2 hover:text-white">
                <svg xmlns="http://www.w3.org/2000/svg" class="w-4 h-4" viewBox="0 0 24 24" fill="currentColor"><path d="M0 0h24v24H0V0z" fill="none"/><path d="M12 2C8.13 2 5 5.13 5 9c0 5.25 7 13 7 13s7-7.75 7-13c0-3.87-3.13-7-7-7zM7 9c0-2.76 2.24-5 5-5s5 2.24 5 5c0 2.88-2.88 7.19-5 9.88C9.88 16.19 7 11.88 7 9z"/></svg>
                <span>ì§€ë„</span>
            </a>
            <a href="#" class="flex items-center gap-1 py-2 hover:text-white">
                <svg xmlns="http://www.w3.org/2000/svg" class="w-4 h-4" viewBox="0 0 24 24" fill="currentColor"><path d="M0 0h24v24H0V0z" fill="none"/><path d="M3 17.25V21h3.75L17.81 9.94l-3.75-3.75L3 17.25zM20.71 7.04c.39-.39.39-1.02 0-1.41l-2.34-2.34c-.39-.39-1.02-.39-1.41 0l-1.83 1.83 3.75 3.75 1.83-1.83z"/></svg>
                <span>ë”ë³´ê¸°</span>
            </a>
        </div>
    </header>

    <main class="max-w-7xl mx-auto px-4 pt-6 grid grid-cols-1 lg:grid-cols-[minmax(0,1fr)_360px] gap-8">
        
        <section id="summary-section" class="col-span-full">
            <div class="mb-3">
                <h1 class="text-2xl md:text-[28px] font-semibold tracking-tight text-[#e8eaed]">ê¸€ë¡œì»¬í¬ë¦¬ì—ì–´í„° ì¤‘ë‹¨íŒ€</h1>
                <div class="text-sm text-[#9aa0a6] mt-1">ë¶€ì‚°ê´‘ì—­ì‹œ ê¸ˆì •êµ¬ ê¸ˆìƒ˜ë¡œ 485ë²ˆê¸¸ 65</div>
            </div>

            <div class="grid lg:grid-cols-[minmax(0,1fr)_360px] gap-4">
                
                <div class="relative rounded-2xl overflow-hidden border border-white/10 bg-search-bar">
                    <img 
                        id="mainImageThumbnail"
                        referrerPolicy="no-referrer"
                        src="https://anijoa7500-tech.github.io/busan-paris-festival/images/Gemini_Generated_Image_px7fb9px7fb9px7f.png" 
                        alt="ê¸€ë¡œì»¬ í¬ë¦¬ì—ì´í„° íŒ€ ì‚¬ì§„ (í´ë¦­ ê°€ëŠ¥)" 
                        class="w-full h-[260px] md:h-[360px] object-cover cursor-pointer" 
                    />
                    <div class="absolute bottom-3 right-3 flex gap-2">
                        <button class="w-8 h-8 grid place-items-center rounded-full bg-black/60 text-white text-sm">â€¹</button>
                        <button class="w-8 h-8 grid place-items-center rounded-full bg-black/60 text-white text-sm">â€º</button>
                    </div>
                </div>

                <div class="grid gap-4">
                    <div class="rounded-2xl border border-white/10 bg-[#1f2023] relative overflow-hidden" style="height: 180px;">
                        <div id="mapPreview" class="absolute inset-0"></div>
                    </div>

                    <div class="grid grid-cols-2 gap-4">
                        <div class="rounded-2xl border border-white/10 bg-search-bar p-4">
                            <div class="text-sm text-[#9aa0a6] mb-2">ë‚ ì”¨</div>
                            <div class="flex items-center justify-between">
                                <div class="flex flex-col items-center">
                                    <div class="text-4xl">â˜€ï¸</div>
                                    <div class="text-xs text-[#9aa0a6]">í™”</div>
                                    <div class="text-base"> 17Â°</div>
                                </div>
                                <div class="flex flex-col items-center">
                                    <div class="text-4xl">ğŸŒ¤ï¸</div>
                                    <div class="text-xs text-[#9aa0a6]">ìˆ˜</div>
                                    <div class="text-base"> 19Â°</div>
                                </div>
                                <div class="flex flex-col items-center">
                                    <div class="text-4xl">â˜ï¸</div>
                                    <div class="text-xs text-[#9aa0a6]">ëª©</div>
                                    <div class="text-base"> 19Â°</div>
                                </div>
                            </div>
                            <a class="mt-2 inline-block text-xs text-google-blue hover:underline" href="#">ì›¨ë”ë‰´ìŠ¤</a>
                        </div>
                        <div class="rounded-2xl border border-white/10 bg-search-bar overflow-hidden">
                            <img
                                id="sideImageThumbnail"
                                src="https://anijoa7500-tech.github.io/busan-paris-festival/images/20150216000102_0.jpg"
                                alt="ë¶€ì‚°ê´‘ì—­ì‹œ ì „ê²½ (í´ë¦­ ê°€ëŠ¥)"
                                class="w-full h-full object-cover cursor-pointer"
                            />
                        </div>
                    </div>
                </div>
            </div>

            <div class="grid lg:grid-cols-2 gap-4 mt-4">
                <div class="rounded-2xl border border-white/10 bg-search-bar p-4 text-[#bdc1c6] leading-relaxed">
                    <div class="text-[#e8eaed] font-semibold mb-2">ê¸°ë³¸í˜„í™©</div>
                    ë¶€ì‚° í•˜ë‹¨ë™ì´ ë‹¨ìˆœíˆ ê²½ìœ ì§€ê°€ ì•„ë‹Œ, ì™¸êµ­ì¸ ê´€ê´‘ê°ì´ 'ë¨¸ë¬¼ê³ , ì†Œë¹„í•˜ê³  ì‹¶ì€' ëª©ì ì§€ê°€ ë˜ê¸° ìœ„í•œ ê¸€ë¡œì»¬ í¬ë¦¬ì—ì´í„°ì˜ í•µì‹¬ ì „ëµì€ í•˜ë‹¨ì´ ê°€ì§„ ë…íŠ¹í•œ ìì›ì„ 'í™˜ìŠ¹ ì‹œê°„'ì— ë§ì¶˜ ë§¤ë ¥ì ì¸ ì²´í—˜ìœ¼ë¡œ ë°”ê¾¸ëŠ” ê²ƒì…ë‹ˆë‹¤.
                </div>
                <div class="rounded-2xl border border-white/10 bg-search-bar p-4 text-sm text-[#e8eaed]">
                    <div class="text-[#e8eaed] font-semibold mb-2">í•˜ë‹¨ ì§€ì—­ í•µì‹¬ì§€í‘œ</div>
                    <dl class="grid grid-cols-[120px_minmax(0,1fr)] gap-y-2">
                        <dt class="text-[#9aa0a6]">ì£¼ìš” ìì›</dt><dd>ì„ìˆ™ë„, ë™ì•„ëŒ€, ë‚™ë™ê°•í•˜êµ¬ë‘‘ (3å¤§ ëœë“œë§ˆí¬)</dd>
                        <dt class="text-[#9aa0a6]">ì½˜í…ì¸  ì ‘ê·¼ì„±</dt><dd>ë¶€ì‚° ìœ ì¼ì˜ 'ê°•-ë°”ë‹¤' ì ‘ì  ë”ë¸” ì—­ì„¸ê¶Œ</dd>
                        <dt class="text-[#9aa0a6]">ì ì¬ë ¥</dt><dd>ê¸€ë¡œë²Œ ë¡œì»¬ ì½˜í…ì¸  í…ŒìŠ¤íŠ¸ë² ë“œ(Testbed)</dd>
                    </dl>
                </div>
            </div>
        </section>
        
        <section class="lg:col-span-1" id="results-section">
            <h2 class="text-xl font-semibold mb-4 text-google-blue">ì´ë¯¸ì§€ ê°¤ëŸ¬ë¦¬</h2>
            <div id="imageGallery" class="grid grid-cols-2 sm:grid-cols-3 md:grid-cols-4 gap-4">
                </div>
            <p class="text-sm text-[#9aa0a6] mt-6">ê°¤ëŸ¬ë¦¬ ì™¸ ê¸°íƒ€ ê²€ìƒ‰ ê²°ê³¼</p>
            <ul id="resultsList" class="space-y-6">
                <li class="p-3 bg-search-bar rounded-lg border border-white/10">
                    <a href="#" class="text-google-blue text-lg hover:underline block">ë¶€ì‚°ì™¸ëŒ€ ê¸€ë¡œì»¬í¬ë¦¬ì—ì´í„° í•˜ë‹¨íŒ€ ê³µì‹ ë¸”ë¡œê·¸</a>
                    <div class="text-xs text-[#9aa0a6] truncate mt-1">https://glocal-creator-hadan.busan.ac.kr/...</div>
                    <p class="text-sm text-[#bdc1c6] mt-2">í•˜ë‹¨ë™ì˜ ìˆ¨ê²¨ì§„ ê°€ì¹˜ë¥¼ ë°œêµ´í•˜ê³  ê¸€ë¡œë²Œ ê´€ê´‘ê°ì„ ìœ ì¹˜í•˜ê¸° ìœ„í•œ ì¤‘ì  í”„ë¡œì íŠ¸ë“¤ì„ ì†Œê°œí•©ë‹ˆë‹¤.</p>
                </li>
            </ul>
        </section>
        
        <aside id="knowledge-panel-aside" class="hidden lg:block lg:sticky lg:top-[76px] h-fit">
            <div class="rounded-2xl border border-white/10 bg-search-bar overflow-hidden shadow">
                <a href="#" target="_blank" rel="noreferrer" class="block">
                    <img 
                        id="knowledgePanelImageThumbnail"
                        referrerPolicy="no-referrer"
                        src="https://anijoa7500-tech.github.io/busan-paris-festival/images/rmfzm.png" 
                        alt="ê¸€ë¡œì»¬ í¬ë¦¬ì—ì´í„° (í´ë¦­ ê°€ëŠ¥)" 
                        class="w-full aspect-square object-cover cursor-pointer" 
                    />
                </a>
                <div class="p-4">
                    <div class="text-sm text-[#9aa0a6] mb-1">ì´ë¦„</div>
                    <div class="text-base text-[#e8eaed] font-semibold">ê¸€ë¡œì»¬ í¬ë¦¬ì—ì´í„°</div>
                    <a href="#" target="_blank" rel="noreferrer" class="mt-2 inline-block text-google-blue text-sm hover:underline">ë¶€ì‚°ì™¸êµ­ì–´ëŒ€í•™êµ : ë°•ê´‘ìš° êµìˆ˜</a>
                </div>
            </div>
        </aside>
    </main>

    <footer class="max-w-7xl mx-auto px-4 mt-10 py-6 text-xs text-[#9aa0a6] border-t border-white/10">
        <div class="flex flex-wrap items-center gap-4">
            <span>ëŒ€í•œë¯¼êµ­ Â· ë¶€ì‚° Â· í•˜ë‹¨</span>
            <span class="text-[#5f6368]">Â·</span>
            <span>ì´ ë¯¸ë¦¬ë³´ê¸°ëŠ” í•™ìŠµÂ·ì‹œì—°ìš© UI í´ë¡ ì…ë‹ˆë‹¤.</span>
        </div>
    </footer>
</div>

<div id="imageViewerModal" class="fixed inset-0 bg-black/90 z-50 hidden items-center justify-center p-4">
    <div class="relative max-w-7xl w-full h-full flex flex-col items-center justify-center">
        <button id="closeViewerBtn" class="absolute top-4 right-4 text-white text-3xl font-light leading-none z-50 opacity-80 hover:opacity-100 transition">
            &times;
        </button>

        <button id="prevImageBtn" class="absolute left-4 top-1/2 -translate-y-1/2 text-white/80 hover:text-white text-5xl z-40 transition disabled:opacity-30 disabled:cursor-not-allowed">
            &lsaquo;
        </button>

        <button id="nextImageBtn" class="absolute right-4 top-1/2 -translate-y-1/2 text-white/80 hover:text-white text-5xl z-40 transition disabled:opacity-30 disabled:cursor-not-allowed">
            &rsaquo;
        </button>
        
        <div class="relative max-w-full max-h-full"> 
            <img id="viewerImage" src="" alt="Full-screen image" class="max-h-[85vh] max-w-[90vw] object-contain shadow-2xl"/> 
            <div id="viewerCaption" class="absolute bottom-0 left-0 right-0 p-4 bg-black/50 text-white text-center text-sm"></div> 
        </div> 
        
        <div id="imageIndexIndicator" class="absolute bottom-4 text-white/80 text-sm"></div> 
    </div>
</div>

<script src="https://unpkg.com/leaflet@1.9.4/dist/leaflet.js"></script>
<script>
    // -------------------------------------
    // ğŸ—ºï¸ Leaflet ì§€ë„ ì´ˆê¸°í™” (ìš”ì²­ì— ë”°ë¼ ìœ ì§€)
    // -------------------------------------
    function initMap() {
        // ë¶€ì‚° í•˜ë‹¨ ì§€ì—­ ì¢Œí‘œ (ì„ìˆ™ë„, ë™ì•„ëŒ€ ê·¼ì²˜)
        const lat = 35.104;
        const lon = 128.966;
        const zoom = 15;

        // ì§€ë„ê°€ ì´ë¯¸ ì´ˆê¸°í™”ë˜ì–´ ìˆëŠ”ì§€ í™•ì¸
        if (document.getElementById('mapPreview')._leaflet_id === undefined) {
             const map = L.map('mapPreview').setView([lat, lon], zoom);

            // Leaflet ì•„ì´ì½˜ ê²½ë¡œ ì„¤ì • (ì—†ìœ¼ë©´ ë§ˆì»¤ê°€ í‘œì‹œ ì•ˆ ë  ìˆ˜ ìˆìŒ)
            if (window.L && L.Icon && L.Icon.Default) { 
                L.Icon.Default.mergeOptions({ 
                    iconRetinaUrl: 'https://unpkg.com/leaflet@1.9.4/dist/images/marker-icon-2x.png', 
                    iconUrl: 'https://unpkg.com/leaflet@1.9.4/dist/images/marker-icon.png', 
                    shadowUrl: 'https://unpkg.com/leaflet@1.9.4/dist/images/marker-shadow.png' 
                });
            }

            L.tileLayer('https://{s}.tile.openstreetmap.org/{z}/{x}/{y}.png', {
                attribution: '&copy; <a href="https://www.openstreetmap.org/copyright">OpenStreetMap</a> contributors'
            }).addTo(map);

            L.marker([lat, lon]).addTo(map)
                .bindPopup('ê¸€ë¡œì»¬í¬ë¦¬ì—ì´í„° í•˜ë‹¨íŒ€ ìœ„ì¹˜ ì¶”ì •')
                .openPopup();
        }
    }
    
    // -------------------------------------
    // ğŸ–¼ï¸ ì´ë¯¸ì§€ ê°¤ëŸ¬ë¦¬/ë·°ì–´ JavaScript (í´ë¦­ ì‹œ ë·°ì–´ ì‹¤í–‰ ë¡œì§ í¬í•¨)
    // -------------------------------------

    const galleryImages = [
        { 
            src: 'https://anijoa7500-tech.github.io/busan-paris-festival/images/Gemini_Generated_Image_px7fb9px7fb9px7f.png', 
            alt: 'ê¸€ë¡œì»¬ í¬ë¦¬ì—ì´í„° íŒ€ ì‚¬ì§„ (ë©”ì¸)' 
        },
        { 
            src: 'https://anijoa7500-tech.github.io/busan-paris-festival/images/20150216000102_0.jpg', 
            alt: 'ë¶€ì‚°ê´‘ì—­ì‹œ ì „ê²½ (ë³´ì¡°)' 
        },
        { 
            src: 'https://anijoa7500-tech.github.io/busan-paris-festival/images/rmfzm.png', 
            alt: 'ê¸€ë¡œì»¬ í¬ë¦¬ì—ì´í„° ì§€ì‹ íŒ¨ë„ ì´ë¯¸ì§€' 
        },
        // ì¶”ê°€ ì˜ˆì‹œ ì´ë¯¸ì§€ (ê°¤ëŸ¬ë¦¬ì—ë§Œ í‘œì‹œ)
        { src: 'https://picsum.photos/id/400/800/600', alt: 'ì˜ˆì‹œ ì´ë¯¸ì§€ 4: ë„ì‹œ' },
        { src: 'https://picsum.photos/id/500/800/600', alt: 'ì˜ˆì‹œ ì´ë¯¸ì§€ 5: ê¸¸ê±°ë¦¬' },
        { src: 'https://picsum.photos/id/600/800/600', alt: 'ì˜ˆì‹œ ì´ë¯¸ì§€ 6: ê±´ì¶•ë¬¼' },
        { src: 'https://picsum.photos/id/700/800/600', alt: 'ì˜ˆì‹œ ì´ë¯¸ì§€ 7: í’ê²½' },
        { src: 'https://picsum.photos/id/800/800/600', alt: 'ì˜ˆì‹œ ì´ë¯¸ì§€ 8: í•´ë³€' },
    ];

    let currentImageIndex = -1; // -1ì€ ë·°ì–´ê°€ ë‹«í˜€ ìˆìŒì„ ì˜ë¯¸

    const elements = {
        modal: document.getElementById('imageViewerModal'),
        viewerImage: document.getElementById('viewerImage'),
        viewerCaption: document.getElementById('viewerCaption'),
        indexIndicator: document.getElementById('imageIndexIndicator'),
        galleryContainer: document.getElementById('imageGallery'),
        resultsSection: document.getElementById('results-section') // ìŠ¤í¬ë¡¤ ëŒ€ìƒ
    };

    /**
     * ê°¤ëŸ¬ë¦¬ ì¸ë„¤ì¼ì„ ë Œë”ë§í•˜ê³  í´ë¦­ ì´ë²¤íŠ¸ë¥¼ ì„¤ì •í•©ë‹ˆë‹¤.
     */
    function renderGallery() {
        if (!elements.galleryContainer) return;

        elements.galleryContainer.innerHTML = '';
        galleryImages.forEach((image, index) => {
            const item = document.createElement('div');
            item.classList.add('gallery-item');
            
            // ì¸ë„¤ì¼ í´ë¦­ ì‹œ ë·°ì–´ ì—´ê¸°
            item.onclick = () => openImageViewer(index);

            const img = document.createElement('img');
            img.src = image.src; 
            img.alt = image.alt;
            
            item.appendChild(img);
            elements.galleryContainer.appendChild(item);
        });
    }

    /**
     * íŠ¹ì • ì¸ë±ìŠ¤ì˜ ì´ë¯¸ì§€ë¥¼ ë·°ì–´ì— í‘œì‹œí•©ë‹ˆë‹¤.
     * @param {number} index - í‘œì‹œí•  ì´ë¯¸ì§€ì˜ ì¸ë±ìŠ¤
     */
    function showImage(index) {
        if (galleryImages.length === 0) return;

        // ì¸ë±ìŠ¤ ìˆœí™˜ ì²˜ë¦¬ (ì˜†ìœ¼ë¡œ ë„˜ì–´ê°€ëŠ” ê¸°ëŠ¥)
        if (index >= galleryImages.length) {
            currentImageIndex = 0;
        } else if (index < 0) {
            currentImageIndex = galleryImages.length - 1;
        } else {
            currentImageIndex = index;
        }

        const currentImage = galleryImages[currentImageIndex];
        
        // ì´ë¯¸ì§€ ë° ìº¡ì…˜ ì—…ë°ì´íŠ¸
        elements.viewerImage.src = currentImage.src;
        elements.viewerCaption.textContent = currentImage.alt;

        // ì¹´ìš´í„° ì—…ë°ì´íŠ¸
        elements.indexIndicator.textContent = `${currentImageIndex + 1} / ${galleryImages.length}`;

        // ë²„íŠ¼ ìƒíƒœ ì—…ë°ì´íŠ¸ (ìˆœí™˜ êµ¬ì¡°ì—ì„œëŠ” í•­ìƒ í™œì„±í™”)
        document.getElementById('prevImageBtn').disabled = false;
        document.getElementById('nextImageBtn').disabled = false;
    }

    /**
     * ì´ë¯¸ì§€ ë·°ì–´ë¥¼ ì—´ê³  ì²« ì´ë¯¸ì§€ë¥¼ í‘œì‹œí•©ë‹ˆë‹¤.
     * @param {number} index - ì‹œì‘ ì´ë¯¸ì§€ì˜ ì¸ë±ìŠ¤
     */
    function openImageViewer(index) {
        document.body.style.overflow = 'hidden'; // ë°°ê²½ ìŠ¤í¬ë¡¤ ë°©ì§€
        elements.modal.classList.remove('hidden');
        elements.modal.classList.add('flex');
        showImage(index);
    }

    /**
     * ì´ë¯¸ì§€ ë·°ì–´ë¥¼ ë‹«ìŠµë‹ˆë‹¤.
     */
    function closeImageViewer() {
        document.body.style.overflow = 'auto'; // ìŠ¤í¬ë¡¤ ë³µêµ¬
        elements.modal.classList.add('hidden');
        elements.modal.classList.remove('flex');
        currentImageIndex = -1;
    }

    /**
     * ë‹¤ìŒ/ì´ì „ ì´ë¯¸ì§€ë¡œ ì´ë™í•©ë‹ˆë‹¤.
     * @param {number} direction - 1 (ë‹¤ìŒ), -1 (ì´ì „)
     */
    function navigateImage(direction) {
        showImage(currentImageIndex + direction);
    }

    /**
     * í´ë¦­ ë° í‚¤ë³´ë“œ ì´ë²¤íŠ¸ë¥¼ ì„¤ì •í•©ë‹ˆë‹¤.
     */
    function setupEvents() {
        // [ì‚¬ìš©ì ìš”ì²­ ë°˜ì˜] ë©”ì¸ í˜ì´ì§€ì˜ í° ì´ë¯¸ì§€ 3ê°œ í´ë¦­ ì‹œ ë·°ì–´ ì—´ê¸°
        document.getElementById('mainImageThumbnail').onclick = () => openImageViewer(0);
        document.getElementById('sideImageThumbnail').onclick = () => openImageViewer(1);
        document.getElementById('knowledgePanelImageThumbnail').onclick = () => openImageViewer(2);

        // ë‹«ê¸° ë²„íŠ¼, íƒìƒ‰ ë²„íŠ¼ ì—°ê²°
        document.getElementById('closeViewerBtn').onclick = closeImageViewer;
        document.getElementById('prevImageBtn').onclick = () => navigateImage(-1);
        document.getElementById('nextImageBtn').onclick = () => navigateImage(1);

        // ë°°ê²½ í´ë¦­ ì‹œ ë‹«ê¸°
        elements.modal.addEventListener('click', (e) => {
            // í´ë¦­ëœ ìš”ì†Œê°€ ëª¨ë‹¬ ìì²´ì¼ ë•Œë§Œ ë‹«ê¸° (ì´ë¯¸ì§€, ë²„íŠ¼ ë“± ìì‹ ìš”ì†Œ ì œì™¸)
            if (e.target.id === 'imageViewerModal') {
                closeImageViewer();
            }
        });

        // í‚¤ë³´ë“œ ì´ë²¤íŠ¸ (ArrowLeft, ArrowRight, Escape)
        document.addEventListener('keydown', (e) => {
            if (currentImageIndex !== -1) { // ëª¨ë‹¬ì´ ì—´ë ¤ ìˆì„ ë•Œë§Œ ë™ì‘
                if (e.key === 'ArrowRight') {
                    navigateImage(1);
                    e.preventDefault(); // ê¸°ë³¸ ìŠ¤í¬ë¡¤ ë™ì‘ ë°©ì§€
                } else if (e.key === 'ArrowLeft') {
                    navigateImage(-1);
                    e.preventDefault(); // ê¸°ë³¸ ìŠ¤í¬ë¡¤ ë™ì‘ ë°©ì§€
                } else if (e.key === 'Escape') {
                    closeImageViewer();
                }
            }
        });
    }

    /**
     * íƒ­ì„ ì „í™˜í•˜ê³ , 'ì´ë¯¸ì§€' íƒ­ í´ë¦­ ì‹œ ê°¤ëŸ¬ë¦¬ ì„¹ì…˜ìœ¼ë¡œ ìŠ¤í¬ë¡¤í•©ë‹ˆë‹¤.
     * @param {string} tabName - í™œì„±í™”í•  íƒ­ì˜ ì´ë¦„
     * @param {boolean} shouldScroll - ìŠ¤í¬ë¡¤ì´ í•„ìš”í•œì§€ ì—¬ë¶€ (ì´ë¯¸ì§€ íƒ­ì—ì„œ true)
     */
    function changeTab(tabName, shouldScroll = false) {
        document.querySelectorAll('.tab-item').forEach(tab => {
            tab.classList.remove('border-google-blue', 'text-google-blue', 'font-semibold');
            tab.classList.add('hover:text-white');
        });
        const activeTab = document.getElementById(`tab-${tabName}`);
        activeTab.classList.add('border-google-blue', 'text-google-blue', 'font-semibold');
        activeTab.classList.remove('hover:text-white');

        // [ì‚¬ìš©ì ìš”ì²­ ë°˜ì˜] ì´ë¯¸ì§€ íƒ­ì„ í´ë¦­í–ˆì„ ê²½ìš° ê°¤ëŸ¬ë¦¬ ì„¹ì…˜ìœ¼ë¡œ ë¶€ë“œëŸ½ê²Œ ìŠ¤í¬ë¡¤
        if (shouldScroll && elements.resultsSection) {
            elements.resultsSection.scrollIntoView({ behavior: 'smooth', block: 'start' });
        }
    }


    // ë¬¸ì„œ ë¡œë“œ ì‹œ ëª¨ë“  ê¸°ëŠ¥ ì´ˆê¸°í™”
    document.addEventListener('DOMContentLoaded', () => {
        initMap();
        renderGallery();
        setupEvents();
        changeTab('all'); // ì´ˆê¸° íƒ­ ì„¤ì •
    });
</script>

</body>
</html>
